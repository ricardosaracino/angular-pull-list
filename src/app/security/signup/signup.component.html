<mat-card class="mat-card-centered">

  <h1 i18n>Sign Up</h1>

  <div *ngIf="successful === true" class="form-field-margin"
       i18n>You will receive a verification email shortly
  </div>

  <div *ngIf="successful === false" class="mat-error form-field-margin"
       i18n>Signup error occurred
  </div>

  <form>
    <mat-form-field class="full-width">
      <input matInput i18n-placeholder placeholder="Enter your email"
             [(ngModel)]="email" [formControl]="signupForm.get('email')" [errorStateMatcher]="matcher">

      <mat-error
        *ngIf="signupForm.get('email').hasError('email') && !signupForm.get('email').hasError('required')"
        i18n>Please enter a valid email address
      </mat-error>

      <mat-error
        *ngIf="signupForm.get('email').hasError('required')"
        i18n>Email is required
      </mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <input matInput i18n-placeholder placeholder="Enter your password"
             [(ngModel)]="password" [formControl]="signupForm.get('password')" [errorStateMatcher]="matcher"
             [type]="hidePassword2 ? 'password' : 'text'" autocomplete="new-password">

      <mat-icon matSuffix (click)="hidePassword = !hidePassword">
        {{hidePassword ? 'visibility_off' : 'visibility'}}
      </mat-icon>

      <mat-error
        *ngIf="signupForm.get('password').hasError('pattern') && !signupForm.get('password').hasError('required')"
        i18n>Password must contain upper, lower and digit
      </mat-error>

      <mat-error
        *ngIf="signupForm.get('password').hasError('required')"
        i18n>Password is required
      </mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <input matInput i18n-placeholder placeholder="Re-enter your password"
             [(ngModel)]="password2" [formControl]="signupForm.get('password2')"
             [type]="hidePassword2 ? 'password' : 'text'" autocomplete="new-password">

      <mat-icon matSuffix (click)="hidePassword2 = !hidePassword2">
        {{hidePassword2 ? 'visibility_off' : 'visibility'}}
      </mat-icon>

      <mat-error
        *ngIf="signupForm.get('password2').hasError('equalTo')"
        i18n>Password does not match
      </mat-error>
    </mat-form-field>

    <div class="form-field-margin text-align-right">
      <button mat-flat-button color="primary" (click)="signup()" [disabled]="!(signupForm.valid && !sending)"
              i18n>Sign up
      </button>
    </div>
  </form>
</mat-card>
